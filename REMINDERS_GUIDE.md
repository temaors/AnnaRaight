# üìß –°–∏—Å—Ç–µ–º–∞ Email-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

## üìã –û–±–∑–æ—Ä

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ email-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∏—Å–µ–º –Ω–æ–≤—ã–º –ª–∏–¥–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

## ‚è∞ –ì—Ä–∞—Ñ–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏

| ‚Ññ  | –¢–∏–ø –ø–∏—Å—å–º–∞ | –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|------------|----------------|----------|
| 1  | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ | –°—Ä–∞–∑—É –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ | –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å + —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ |
| 2  | –í–∏–¥–µ–æ-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ | +3 —á–∞—Å–∞ | –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ |
| 3  | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ | +2 –¥–Ω—è | –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Å—Ç–∞–ª–∏—Å—å –ª–∏ –≤–æ–ø—Ä–æ—Å—ã |
| 4  | –ü—Ä—è–º–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ | +5 –¥–Ω–µ–π | –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é |
| 5  | –§–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ | +10 –¥–Ω–µ–π | –ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –∑–∞–ø–∏—Å–∞—Ç—å—Å—è |
| 6  | –û—Ç–∑—ã–≤ 1 | +17 –¥–Ω–µ–π | –ü–µ—Ä–≤—ã–π –æ—Ç–∑—ã–≤ –∫–ª–∏–µ–Ω—Ç–∞ |
| 7  | –û—Ç–∑—ã–≤ 2 | +27 –¥–Ω–µ–π | –í—Ç–æ—Ä–æ–π –æ—Ç–∑—ã–≤ –∫–ª–∏–µ–Ω—Ç–∞ |
| 8  | –û—Ç–∑—ã–≤ 3 | +41 –¥–µ–Ω—å | –¢—Ä–µ—Ç–∏–π –æ—Ç–∑—ã–≤ –∫–ª–∏–µ–Ω—Ç–∞ |
| 9  | –ö–æ–Ω—Ç–µ–Ω—Ç 1 | +62 –¥–Ω—è | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### 1. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ª–∏–¥–∞ (`/api/lead/save`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- –ö–∞–∂–¥–æ–µ —Å–ª–µ–¥—É—é—â–µ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ö–∞–∂–¥—ã–µ **10 –º–∏–Ω—É—Ç** —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —á–µ—Ä–µ–∑ JavaScript –≤ `layout.tsx`

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –¢–∞–±–ª–∏—Ü–∞ `email_reminders` —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –°—Ç–∞—Ç—É—Å—ã: `pending` (–æ–∂–∏–¥–∞–µ—Ç), `sent` (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ), `failed` (–æ—à–∏–±–∫–∞)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
–û—Ç–∫—Ä–æ–π—Ç–µ `/admin/reminders` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–∂–∏–¥–∞—é—â–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø–æ —Ç–∏–ø–∞–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö/–Ω–µ—É–¥–∞—á–Ω—ã—Ö
- –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
- –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

### API Endpoints
- `GET /api/reminders/status` - —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
- `GET /api/process-reminders` - —Ä—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `POST /api/reminders/start` - –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç
```bash
node scripts/test-reminders.js
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ª–∏–¥–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∞ `/start`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ `/admin/reminders`, —á—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç) –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ä—É—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞ - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ processing reminders
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –±–∞–∑–µ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ —Å status='pending'
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ email –≤ `lib/email-whc.ts`

### –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/admin/reminders` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "Overdue"
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä—É—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–Ω–æ–ø–∫–æ–π "Process Now"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–§–∞–π–ª –±–∞–∑—ã: `data/funnel.db`
```sql
-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
SELECT * FROM email_reminders ORDER BY scheduledFor DESC;

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
SELECT status, COUNT(*) FROM email_reminders GROUP BY status;
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏
–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –º–µ—Ç–æ–¥—ã –≤ `lib/reminder-scheduler.ts`:
- `scheduleVideoReminder()` - 3 —á–∞—Å–∞
- `scheduleCheckingInReminder()` - 2 –¥–Ω—è  
- `scheduleDirectOfferReminder()` - 3 –¥–Ω—è
- –∏ —Ç.–¥.

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
–í `app/layout.tsx` –∏–∑–º–µ–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª:
```javascript
// –¢–µ–∫—É—â–∏–π: –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
processingInterval = setInterval(processReminders, 10 * 60 * 1000);

// –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç:
processingInterval = setInterval(processReminders, 5 * 60 * 1000);
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ `app/layout.tsx`:
```javascript
// processReminders();
// processingInterval = setInterval(processReminders, 10 * 60 * 1000);
```

## üìù –õ–æ–≥–∏

–°–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
- `üîÑ [REMINDER SCHEDULER]` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `üìÖ [REMINDER SCHEDULER]` - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π  
- `‚úÖ [REMINDER SCHEDULER]` - —É—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- `‚ùå [REMINDER SCHEDULER]` - –æ—à–∏–±–∫–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –ø–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–º email –∞–¥—Ä–µ—Å–∞–º
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–µ—Ä–µ–¥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∑–∞ —Ä–∞–∑ (50)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã