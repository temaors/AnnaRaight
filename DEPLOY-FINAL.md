# üöÄ –î–µ–ø–ª–æ–π –Ω–∞ –≤–∞—à Ubuntu VPS

## üìã –î–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞
- **IP**: 51.38.125.120
- **IPv6**: 2001:41d0:701:1100::97a6
- **–ü–∞—Ä–æ–ª—å**: Chatbot1!!!

## üîß –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SSH
```bash
ssh ubuntu@51.38.125.120
# –ü–∞—Ä–æ–ª—å: Chatbot1!!!
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
–ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏ –¥–ª—è –¥–æ–º–µ–Ω–∞ `annaraight.com`:

**–í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º –¥–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å–∏:**
```
A    annaraight.com     51.38.125.120
A    www.annaraight.com 51.38.125.120
```

**–ò–ª–∏ AAAA –¥–ª—è IPv6:**
```
AAAA annaraight.com     2001:41d0:701:1100::97a6
AAAA www.annaraight.com 2001:41d0:701:1100::97a6
```

## üõ†Ô∏è –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
scp server-setup.sh ubuntu@51.38.125.120:~/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
ssh ubuntu@51.38.125.120
chmod +x ~/server-setup.sh
./server-setup.sh
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç:
ssh-keygen -t rsa -b 4096

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
ssh-copy-id ubuntu@51.38.125.120
```

## üöÄ –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
–ò–∑–º–µ–Ω–∏—Ç–µ –≤ `deploy.sh`:
```bash
SERVER="ubuntu@51.38.125.120"
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
```bash
./deploy.sh root@51.38.125.120
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
ssh root@51.38.125.120

cd /var/www/funnel-app
sudo -u funnel nano .env.production
```

–î–æ–±–∞–≤—å—Ç–µ:
```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL="file:./data/funnel.db"

# –î–æ–º–µ–Ω
NEXT_PUBLIC_BASE_URL="https://annaraight.com"

# Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WHC
SMTP_HOST="mail.annaraight.com"
SMTP_PORT="465" 
SMTP_USER="hello@annaraight.com"
SMTP_PASSWORD="–≤–∞—à-email-–ø–∞—Ä–æ–ª—å"

# Google Calendar (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
GOOGLE_CALENDAR_CREDENTIALS_PATH="./database/credentials.json"
GOOGLE_CALENDAR_TOKEN_PATH="./database/token.json"

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏...
```

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
sudo -u funnel pm2 restart funnel-app
```

## üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL

### 1. –î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS (24-48 —á–∞—Å–æ–≤)
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
nslookup annaraight.com
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å 51.38.125.120
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
sudo certbot --nginx -d annaraight.com -d www.annaraight.com
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
```bash
# –°—Ç–∞—Ç—É—Å PM2
sudo -u funnel pm2 list
sudo -u funnel pm2 logs

# –°—Ç–∞—Ç—É—Å Nginx  
sudo systemctl status nginx

# –°—Ç–∞—Ç—É—Å —Ñ–∞–π—Ä–≤–æ–ª–∞
sudo ufw status
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–π—Ç
- http://51.38.125.120:3000 (–ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø)
- http://51.38.125.120 (—á–µ—Ä–µ–∑ Nginx)  
- https://annaraight.com (—Å SSL)

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### PM2 –∫–æ–º–∞–Ω–¥—ã
```bash
sudo -u funnel pm2 list          # —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sudo -u funnel pm2 logs          # –ª–æ–≥–∏
sudo -u funnel pm2 restart all   # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo -u funnel pm2 stop all      # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo -u funnel pm2 delete all    # —É–¥–∞–ª–µ–Ω–∏–µ
```

### Nginx –∫–æ–º–∞–Ω–¥—ã
```bash
sudo systemctl status nginx      # —Å—Ç–∞—Ç—É—Å
sudo systemctl restart nginx     # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo nginx -t                    # –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

### –õ–æ–≥–∏
```bash
sudo tail -f /var/log/nginx/access.log   # –ª–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/error.log    # –æ—à–∏–±–∫–∏ Nginx
sudo -u funnel pm2 logs                  # –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ —Å–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã
sudo netstat -tlnp | grep :3000
sudo netstat -tlnp | grep :80

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
sudo -u funnel pm2 list
```

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏:
```bash
sudo chown -R funnel:funnel /var/www/funnel-app
sudo chmod 755 /var/www/funnel-app/data
```

### –ï—Å–ª–∏ –Ω–µ—Ç SSL:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS
dig annaraight.com

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot renew --force-renewal
```

## üìû –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (A-–∑–∞–ø–∏—Å—å –Ω–∞ 51.38.125.120)
- [ ] –°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`server-setup.sh`)
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ (`deploy.sh`)
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] PM2 –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ https://annaraight.com

**–ì–æ—Ç–æ–≤–æ!** üéâ